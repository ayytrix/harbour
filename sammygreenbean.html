<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Harbour News Network</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" href="https://raw.githubusercontent.com/ayytrix/harbour/refs/heads/main/ChatGPT%20Image%20Oct%2027%2C%202025%2C%2011_00_04%20AM.png">
<style>
  body{margin:0;font-family:Arial,sans-serif;background:#f3f3f3;color:#222}
  header{background:linear-gradient(90deg,#2b3e6b,#163052);padding:12px 20px;color:#fff;display:flex;align-items:center;justify-content:space-between}
  header img{height:44px}
  header .brand{font-weight:700;font-size:18px}
  nav a{color:#fff;text-decoration:none;margin-left:15px;font-weight:600}
  nav a:hover{text-decoration:underline}
  #notice{background:linear-gradient(90deg,#ff8c00,#cc7a00);color:#fff;padding:10px 16px;font-weight:700;text-align:center}
  main{max-width:980px;margin:28px auto;padding:0 16px}
  .article-card{background:#fff;border:1px solid #e1e1e1;border-radius:8px;padding:16px;margin-bottom:20px;box-shadow:0 4px 12px rgba(0,0,0,0.05)}
  .article-card img{max-width:100%;border-radius:6px;margin-bottom:10px}
  .article-card h2{margin:0;font-size:20px;color:#1a4a84}
  .article-card h4{margin:4px 0;color:#555;font-weight:normal}
  .article-card .tags{font-size:12px;color:#888;margin-top:8px}
  footer{text-align:center;font-size:13px;color:#666;padding:16px;border-top:1px solid #ccc;margin-top:40px}
</style>
</head>
<body>

<header>
  <div style="display:flex;align-items:center;gap:12px">
    <img src="https://raw.githubusercontent.com/ayytrix/harbour/refs/heads/main/ChatGPT%20Image%20Oct%2027%2C%202025%2C%2011_00_04%20AM.png" alt="HNN Logo">
    <div class="brand">Harbour News Network</div>
  </div>
  <nav>
    <a href="harbour.html">Home</a>
    <a href="CreateArticle.html">Create Article</a>
    <a href="login.html">Login</a>
    <a href="signup.html">Sign Up</a>
  </nav>
</header>

<div id="notice">Loading latest articles...</div>

<main id="articlesContainer">
  <!-- Articles will be loaded here -->
</main>

<footer>© 2025 Harbour News Network — All fake news, all the time.</footer>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
  import { getFirestore, collection, getDocs, query, where, orderBy } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBPmJ-QYXZ41gx-4PjCpUPuw7DLnDq0JFg",
    authDomain: "venux1.firebaseapp.com",
    projectId: "venux1",
    storageBucket: "venux1.appspot.com",
    messagingSenderId: "231055963335",
    appId: "1:231055963335:web:34c2f52fca2191b3d0bae2",
    measurementId: "G-N36RRV95SW"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const articlesContainer = document.getElementById("articlesContainer");
  const noticeEl = document.getElementById("notice");

  async function loadArticles() {
    try {
      const q = query(
        collection(db, "harbour_articles"),
        where("visibility", "==", "public"),
        orderBy("createdAt", "desc")
      );
      const snapshot = await getDocs(q);

      if (snapshot.empty) {
        noticeEl.textContent = "No articles yet.";
        return;
      }

      noticeEl.textContent = "Latest articles:";
      articlesContainer.innerHTML = "";

      snapshot.forEach(docSnap => {
        const data = docSnap.data();
        const html = `
          <div class="article-card">
            ${data.image ? `<img src="${data.image}" alt="Article image">` : ""}
            <h2>${data.title}</h2>
            <h4>${data.subtitle || ""}</h4>
            <div>${data.body}</div>
            ${data.tags?.length ? `<div class="tags">Tags: ${data.tags.join(", ")}</div>` : ""}
          </div>
        `;
        articlesContainer.innerHTML += html;
      });

    } catch (err) {
      console.error(err);
      noticeEl.textContent = "Failed to load articles. Make sure Firestore rules allow read access.";
    }
  }

  loadArticles();
</script>

</body>
</html>
